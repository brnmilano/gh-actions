# ============================================
# ğŸ”„ Workflow de CI (Continuous Integration)
# ============================================
# Este arquivo define as automaÃ§Ãµes que rodam
# sempre que cÃ³digo Ã© enviado ao repositÃ³rio.

name: CI - gh-actions # Nome do workflow (aparece na aba Actions do GitHub)

# ============================================
# ğŸ¯ TRIGGERS - Quando este workflow executa?
# ============================================
on:
  # Executa quando hÃ¡ push nas branches main ou develop
  push:
    branches:
      - main
      - develop

  # Executa quando hÃ¡ Pull Request para main ou develop
  pull_request:
    branches:
      - main
      - develop

# ============================================
# ğŸ’¼ JOBS - O que serÃ¡ executado?
# ============================================
jobs:
  # --------------------------------------------
  # Job de Build e Lint
  # --------------------------------------------
  build:
    name: ğŸ—ï¸ Build & Lint # Nome amigÃ¡vel do job

    # Define o sistema operacional do runner
    # ubuntu-latest Ã© gratuito e mais rÃ¡pido
    runs-on: ubuntu-latest

    # --------------------------------------------
    # STEPS - Passos do job
    # --------------------------------------------
    steps:
      # 1ï¸âƒ£ Checkout do cÃ³digo
      # Baixa o cÃ³digo do repositÃ³rio para o runner
      - name: ğŸ“¥ Checkout do cÃ³digo
        uses: actions/checkout@v4

      # 2ï¸âƒ£ Configurar Node.js
      # Instala a versÃ£o do Node.js especificada
      - name: ğŸ“¦ Configurar Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20" # VersÃ£o LTS do Node
          cache: "npm" # Cache das dependÃªncias (acelera builds)

      # 3ï¸âƒ£ Instalar dependÃªncias
      # Roda npm ci (instalaÃ§Ã£o limpa, ideal para CI)
      - name: ğŸ“š Instalar dependÃªncias
        run: npm ci

      # 4ï¸âƒ£ Executar Lint
      # Verifica erros de cÃ³digo e padronizaÃ§Ã£o
      - name: ğŸ” Executar Lint
        run: npm run lint

      # 5ï¸âƒ£ Build da aplicaÃ§Ã£o
      # Compila o projeto Next.js
      - name: ğŸ—ï¸ Build da aplicaÃ§Ã£o
        run: npm run build
